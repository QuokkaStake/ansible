groups:
  - name: CosmosNodeExporter
    rules:

      - alert: CosmosNodeCatchingUp
        expr: cosmos_node_exporter_catching_up == 1
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: Tendermint node not in sync (instance {{ $labels.instance }})
          description: "Tendermint node not in sync \n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

      - alert: CosmosNodeNotLatestBinary
        expr: cosmos_node_exporter_is_latest == 0
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: "Tendermint node is not running the latest binary (instance {{ $labels.instance }}: github version {{ $labels.remote_version }}, local version: {{ $labels.local_version }})"
          description: "Tendermint node is not running the latest binary \n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

      - alert: CosmosNodeVotingPowerValidator
        expr: cosmos_node_exporter_voting_power{type="validator"} == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "Tendermint validator node has 0 voting power (instance {{ $labels.instance }}"
          description: "Tendermint validator node has 0 voting power \n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

      - alert: CosmosNodeVotingPowerTestnet
        expr: cosmos_node_exporter_voting_power{type="testnet"} == 0
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: "Tendermint testnet node has 0 voting power (instance {{ $labels.instance }}"
          description: "Tendermint testnet node has 0 voting power \n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

      - alert: CosmosNodeTimeSinceLatestBlock
        expr: (cosmos_node_exporter_time_since_latest_block / 60) > 10
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "Tendermint node's latest block was later than 10 minutes ago (instance {{ $labels.instance }}"
          description: "Tendermint node's latest block was later than 10 minutes ago \n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

      - alert: CosmosNodeUpgradeBinaryNotPresent
        expr: cosmos_node_exporter_upgrade_binary_present == 0
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: "Cosmos node does not have the upgrade binary (instance {{ $labels.instance }}, upgrade {{ $labels.name }})"
          description: "Cosmos node does not have the upgrade binary \n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

      - alert: CosmosNodeErrors
        expr: cosmos_node_exporter_query_successful == 0
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: "cosmos-node-exporter has errors (instance {{ $labels.instance }}"
          description: "cosmos-node-exporter has errors \n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"
